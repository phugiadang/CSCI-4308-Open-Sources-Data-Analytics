% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,12pt,english]{sphinxmanual}
\usepackage[utf8]{inputenc}
\DeclareUnicodeCharacter{00A0}{\nobreakspace}
\usepackage{cmap}
\usepackage[T1]{fontenc}

\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{longtable}
\usepackage{sphinx}
\usepackage{multirow}
\usepackage{eqparbox}


\addto\captionsenglish{\renewcommand{\figurename}{Fig. }}
\addto\captionsenglish{\renewcommand{\tablename}{Table }}
\SetupFloatingEnvironment{literal-block}{name=Listing }



\title{Open Source Data Analytics Documentation}
\date{April 28, 2016}
\release{1.0}
\author{Phu Dang, Samuel Horton, David Bittle, Daniel Nolan, Bryan Connelly, Eric Lindemann}
\newcommand{\sphinxlogo}{\includegraphics{logo.png}\par}
\renewcommand{\releasename}{Release}
\setcounter{tocdepth}{1}
\makeindex

\makeatletter
\def\PYG@reset{\let\PYG@it=\relax \let\PYG@bf=\relax%
    \let\PYG@ul=\relax \let\PYG@tc=\relax%
    \let\PYG@bc=\relax \let\PYG@ff=\relax}
\def\PYG@tok#1{\csname PYG@tok@#1\endcsname}
\def\PYG@toks#1+{\ifx\relax#1\empty\else%
    \PYG@tok{#1}\expandafter\PYG@toks\fi}
\def\PYG@do#1{\PYG@bc{\PYG@tc{\PYG@ul{%
    \PYG@it{\PYG@bf{\PYG@ff{#1}}}}}}}
\def\PYG#1#2{\PYG@reset\PYG@toks#1+\relax+\PYG@do{#2}}

\expandafter\def\csname PYG@tok@gd\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gu\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@gt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PYG@tok@gs\endcsname{\let\PYG@bf=\textbf}
\expandafter\def\csname PYG@tok@gr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@cm\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@vg\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@vi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@mh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@cs\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\colorbox[rgb]{1.00,0.94,0.94}{\strut ##1}}}
\expandafter\def\csname PYG@tok@ge\endcsname{\let\PYG@it=\textit}
\expandafter\def\csname PYG@tok@vc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@il\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@go\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.20,0.20,0.20}{##1}}}
\expandafter\def\csname PYG@tok@cp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@gi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gh\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@ni\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.84,0.33,0.22}{##1}}}
\expandafter\def\csname PYG@tok@nl\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.13,0.44}{##1}}}
\expandafter\def\csname PYG@tok@nn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@no\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.38,0.68,0.84}{##1}}}
\expandafter\def\csname PYG@tok@na\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@nb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@nd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.33,0.33,0.33}{##1}}}
\expandafter\def\csname PYG@tok@ne\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.49}{##1}}}
\expandafter\def\csname PYG@tok@si\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.44,0.63,0.82}{##1}}}
\expandafter\def\csname PYG@tok@s2\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@nt\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.45}{##1}}}
\expandafter\def\csname PYG@tok@nv\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@s1\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@ch\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@m\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@gp\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@sh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@ow\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@sx\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@bp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c1\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@o\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PYG@tok@kc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@mf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@err\endcsname{\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PYG@tok@mb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@ss\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.32,0.47,0.09}{##1}}}
\expandafter\def\csname PYG@tok@sr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.14,0.33,0.53}{##1}}}
\expandafter\def\csname PYG@tok@mo\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@kd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@mi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@kn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@cpf\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@kr\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@s\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@kp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@w\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PYG@tok@kt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.56,0.13,0.00}{##1}}}
\expandafter\def\csname PYG@tok@sc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@k\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@se\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sd\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}

\def\PYGZbs{\char`\\}
\def\PYGZus{\char`\_}
\def\PYGZob{\char`\{}
\def\PYGZcb{\char`\}}
\def\PYGZca{\char`\^}
\def\PYGZam{\char`\&}
\def\PYGZlt{\char`\<}
\def\PYGZgt{\char`\>}
\def\PYGZsh{\char`\#}
\def\PYGZpc{\char`\%}
\def\PYGZdl{\char`\$}
\def\PYGZhy{\char`\-}
\def\PYGZsq{\char`\'}
\def\PYGZdq{\char`\"}
\def\PYGZti{\char`\~}
% for compatibility with earlier versions
\def\PYGZat{@}
\def\PYGZlb{[}
\def\PYGZrb{]}
\makeatother

\renewcommand\PYGZsq{\textquotesingle}

\begin{document}

\maketitle
\tableofcontents
\phantomsection\label{index::doc}


Contents:


\chapter{Documentation}
\label{documentation::doc}\label{documentation:documentation}\label{documentation:welcome-to-team-osam-s-project-documentation}
Contents:


\section{OpenStack}
\label{openStack:openstack}\label{openStack::doc}
Contents:


\subsection{OpenStack Instances}
\label{instances:openstack-instances}\label{instances::doc}

\subsubsection{\textbf{Machine 1:}}
\label{instances:machine-info}\label{instances:machine-1}
\textbf{IP Address:} 128.138.202.110


\bigskip\hrule{}\bigskip


\textbf{Functions:}
\begin{itemize}
\item {} 
Continuously stream tweets about presidential candidates

\item {} 
Periodically pull in new polls via the HuffPost Pollster API

\item {} 
Datastax Cassandra Datacenter

\item {} 
Spark master node

\end{itemize}


\subsubsection{\textbf{Machine 2:}}
\label{instances:machine-2}
\begin{DUlineblock}{0em}
\item[] \textbf{IP Address:} 128.138.202.117
\end{DUlineblock}


\bigskip\hrule{}\bigskip


\textbf{Functions:}
\begin{itemize}
\item {} 
Download the GDELT file for the current day

\item {} 
Datastax Analytics Datacenter

\item {} 
Spark slave node

\end{itemize}


\subsection{Data Storage}
\label{dataStorage:data-storage}\label{dataStorage::doc}
For data storage, we loaded each instance with a 500gb partition using the xfs file system. This is more than sufficient for storing all of our tweets, polls, and GDELT files.


\section{Data Collection}
\label{dataCollection:data-collection}\label{dataCollection::doc}
Contents:


\subsection{Our Utilization of the Huffington Post Pollster API in gathering poll data}
\label{polls:our-utilization-of-the-huffington-post-pollster-api-in-gathering-poll-data}\label{polls::doc}
We wrote a Python program that gathers all of the polls that the API releases.There was no set format of the polls, so we had to write another program that parses each poll, and then converts it into a universal form. Once the poll is in the correct format, it is then stored in the poll table within our database.


\subsection{Our Utilization of the Tweepy API in gathering Tweets}
\label{twitter::doc}\label{twitter:our-utilization-of-the-tweepy-api-in-gathering-tweets}
In order to gather tweets, we created a python program that incorporates the Tweepy API. We define keywords associated with each candidate, such as `feelTheBern' and `Trump 2016', that can be used to filter all of the tweets that our streams have access to. To seperate the tweets associated with each candidate, it became necessary for each candidate to have a seperate tweet stream. To do this, we utilitezed a Python threading library. Our implementation starts up a thread for each candidate, and each thread runs its own tweet stream. Upon recieving a tweet, each thread takes the tweet and stores it into the appropriate candidate's table in our Cassandra database. We chose the Tweepy API because one of the teammembers had used it previously, and spoke highly of it. It is very simple to instal and use, and allows you to easily and quickly access twitter streaming.


\section{Types of Analysis Conducted}
\label{analysis:types-of-analysis-conducted}\label{analysis::doc}
Contents:


\subsection{Sentiment Analysis}
\label{sentimentAnalysis:sentiment-analysis}\label{sentimentAnalysis::doc}
In order to get the results with the best accuracy, we found the top five people that tweeted the most about each candidate. Then, for each of these people's tweets, we ran the tweet text through a text processing api, located \href{http://www.text-processing.com}{here}. We found this tool to be great, as if it cannot decide if the sentiment of the tweet is positive or negative, it classifies it as neutral. Thus, the majority of the tweets we processed were classified as neutral, leading to a closer, safe underestimate versus a potentially erronius one.


\subsection{Time Series Analysis}
\label{timeSeriesAnalysis::doc}\label{timeSeriesAnalysis:time-series-analysis}\label{timeSeriesAnalysis:here}

\subsection{Linear Regression}
\label{linearRegression:linear-regression}\label{linearRegression::doc}

\subsection{Higher Order Regression}
\label{higherOrderRegression::doc}\label{higherOrderRegression:higher-order-regression}

\section{Cassandra Cluster}
\label{cassandraDB::doc}\label{cassandraDB:cassandra-cluster}
Contents:


\subsection{Database Schemas}
\label{schema:database-schemas}\label{schema::doc}

\subsubsection{\textbf{Candidates}}
\label{schema:candidates}
\begin{DUlineblock}{0em}
\item[] candidate\_name(
\item[]
\begin{DUlineblock}{\DUlineblockindent}
\item[] tweet\_id varint,
\item[] created\_at varint,
\item[] coordinates list\textless{}float\textgreater{},
\item[] favorite\_count int,
\item[] hashtags list\textless{}text\textgreater{},
\item[] is\_retweet int,
\item[] lang text,
\item[] quoted\_status\_id bigint,
\item[] retweet\_count int,
\item[] tweet\_text text,
\item[] user\_id text,
\item[] PRIMARY KEY (tweet\_id, created\_at)
\item[]
\begin{DUlineblock}{\DUlineblockindent}
\item[] );
\end{DUlineblock}
\end{DUlineblock}
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] Each candidate gets their own table following the same pattern. The primary key is a string that contains the date that the tweet was created at. There is a list of floats that contain the coordinates of the user that posted the given tweet. There is an integer that represents the number of times the given tweet was favorited. There is also a list of strings that contains all of the different hashtags used in the tweet. Next, there is a string that represents the language that the tweet was typed in. There is a big int that represents the quoted status id. There is also an int that represents the number of times the given tweet was retweeted. Finally, there is a string that represents the unique tweet id of the tweet.
\end{DUlineblock}


\subsubsection{\textbf{Polls}}
\label{schema:polls}
The attributes of each poll are id, pollser, start\_date, end\_date, name, observations, responses. The ID is used as the primary key and is just an integer that increments with each poll inserted into the database. This was necessary because there was no gurantee that any attribute or small subset of attributes from the API would always be unique. The last ID used is stored in PollID\_DONOTTOUCH.txt so that it can be remembered each time PollGrabber.py is run. pollster, start\_date, end\_date and name are all stored as strings (`text' in cql) and are taken directly from the API. `observations' is also taken from the API but is stored as an int. `responses' is also stored as text, but is an array of dictionaries containing the information about each choice given in the poll. After being retrieved from the database, `eval()' is used to decipher its structure in Python. This structure is explained in PollReturnableStructure.md


\section{Bugs}
\label{bugs::doc}\label{bugs:bugs}

\subsection{Known Bugs}
\label{currentbugs::doc}\label{currentbugs:known-bugs}

\subsection{Fixed Bugs}
\label{fixedbugs:fixed-bugs}\label{fixedbugs::doc}

\subsubsection{Tweet Streaming}
\label{fixedbugs:tweet-streaming}
\begin{DUlineblock}{0em}
\item[] \textbf{Bug}: If we re-run a tweet stream too many times, we get a 420 error, which is a denial of service by Twitter due to too many requests.
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \textbf{Solution}: What was killing us was that we were running six different threads, each with its own tweet Stream, and all using the same Twitter credentials. We gave each thread unique Twitter credentials, and this fixed the issue of recieving 420 errors.
\end{DUlineblock}


\subsubsection{Cassandra}
\label{fixedbugs:cassandra}
\begin{DUlineblock}{0em}
\item[] \textbf{Bug}: Fatal exception during initialization org.apache.cassandra.exceptions.ConfigurationException: Found system keyspace files, but they couldn't be loaded!
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \textbf{Solution}: Execute the command \code{sudo rm -rf /VOLUME/Cassandra/data/system}
\end{DUlineblock}


\chapter{Guides}
\label{guides::doc}\label{guides:guides}
Contents:


\section{Setting up a Multi-Machine Cassandra Cluster}
\label{cassandra:setting-up-a-multi-machine-cassandra-cluster}\label{cassandra::doc}
\begin{DUlineblock}{0em}
\item[] Step 1. Create a Datastax Enterprise Account
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] Step 2. Run the command:
\end{DUlineblock}

\code{curl -{-}user \textless{}your\_datastax\_email\_here\textgreater{}:\textless{}your\_datastax\_password\_here\textgreater{} -L http://downloads.datastax.com/enterprise/dse.tar.gz \textbar{} tar xz}

\begin{DUlineblock}{0em}
\item[] Step 3. Repeat Step 2 on every machine you want to include in your cluster
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] Step 4. Edit the Cassandra.yaml file on each cluster, which is located at:
\end{DUlineblock}

\code{dse-x.x.x/resources/cassandra/conf/cassandra.yaml}

\begin{DUlineblock}{0em}
\item[] 
\item[] \emph{Here are the things that you want to edit in cassandra.yaml}:
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 1. cluster\_name
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 2. initial\_token
\item[] There is a python file that generates tokens for each machine, based off of the number of machines that are in your cluster. Use google to find the specific algorithim. You will have one machine set its initial\_token to 0.
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 3. Under the section seed\_provider, in the section marked seeds, add the ip address of each machine you have in your cluster. An example of this would be:
\end{DUlineblock}

\code{- seeds: "128.138.202.110, 128.138.202.117"}

\begin{DUlineblock}{0em}
\item[] \emph{Make sure that the ip of the machine you are on comes first in this list.}
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 4. listen\_address
\item[] Simply set this to the machine's ip. Example:
\item[] \code{listen\_address: 128.138.202.117}
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 5. endpoint\_snitch
\item[] The snitch Cassandra where to store replicas. There are several snitches, so it is best to know exactly how you want your cluster to be setup, so you can choose the snitch that best suites your needs.
\end{DUlineblock}


\section{Setting up a Multi-Machine Spark Cluster}
\label{spark::doc}\label{spark:setting-up-a-multi-machine-spark-cluster}\begin{enumerate}
\item {} 
\code{sudo yum install wget}

\item {} 
\code{wget -O /home/centos/spark.tar‘http://d3kbcqa49mib13.cloudfront.net/spark-1.5.1-bin-hadoop2.6.tgz’}

\item {} 
\code{tar -zfx spark.tar}

\item {} 
\code{cd spark-1.5.1-bin-hadoop2.6/}

\item {} 
\code{yum search openjdk-devel}

\item {} 
\code{sudo yum install java-1.7.0-openjdk-devel.x86\_64}

\item {} 
\code{sudo /usr/sbin/alternatives -{-}config java}

\item {} 
\code{sudo /usr/sbin/alternatives -{-}config javac}

\item {} 
\code{sudo vim /etc/profile}

\item {} 
Now, add the following lines at the end

\end{enumerate}
\begin{enumerate}
\item {} 
\code{export JAVA\_HOME=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.19.x86\_64}

\item {} 
\code{OPTIONAL( export JAVA\_HOME=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.85-2.6.1.2.el7\_1.x86\_64/jre  )}

\item {} 
\code{export JRE\_HOME=\$JAVA\_HOME/jre}

\item {} 
\code{export PATH=\$PATH:\$JAVA\_HOME/bin}

\item {} 
\code{export CLASSPATH=.:\$JAVA\_HOME/lib/dt.jar:\$JAVA\_HOME/lib/tools.jar}

\end{enumerate}
\begin{enumerate}
\setcounter{enumi}{10}
\item {} 
Now, save and exit

\item {} 
\code{source /etc/profile}

\item {} 
\code{java -version}

\item {} 
\code{wget -O /home/centos/scala.tgz "http://downloads.typesafe.com/scala/2.10.6/scala-2.10.6.tgz?\_ga=1.170409123.2032133767.1444195421"}

\item {} 
\code{tar zfx scala.tgz}

\item {} 
\code{sudo mv scala-2.10.6 /usr/lib}

\item {} 
\code{sudo vim /etc/profile}

\item {} 
Now, add the following lines at the end

\end{enumerate}
\begin{enumerate}
\item {} 
\code{export SCALA\_HOME=/usr/lib/scala-2.10.6}

\item {} 
\code{export PATH=\$PATH:\$SCALA\_HOME/bin}

\end{enumerate}
\begin{enumerate}
\setcounter{enumi}{18}
\item {} 
Now, Save and exit

\item {} 
\code{source /etc/profile}

\end{enumerate}


\section{Firing up the OpenStack}
\label{openStackStartUp:firing-up-the-openstack}\label{openStackStartUp::doc}
\textbf{1. Launch Spark}

\begin{DUlineblock}{0em}
\item[] \emph{Step 1}: On Machine 1, navigate to the directory /home/centos/spark-1.5.1-bin-hadoop2.6/sbin
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \emph{Step 2}: Now run the command ./start-all.sh
\end{DUlineblock}

\textbf{2. Launch Cassandra}

\begin{DUlineblock}{0em}
\item[] \emph{Step 1}: On Machine 2, navigate to the directory /home/centos/dse-4.8.1/bin
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \emph{Step 2}: now run the command sudo ./dse cassandra -t, and wait a while until you see the last three following lines:
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \code{INFO  05:06:59  SparkClusterInfo plugin using 1 async writers}
\item[] \code{INFO  05:06:59  Initializing data object io tracker plugin}
\item[] \code{INFO  05:06:59  Hive metastore version: 1}
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \emph{Step 3}: On Machine 2, navigate to the directory /home/centos/dse-4.8.1/bin
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \emph{Step 4}: now run the command sudo ./dse cassandra, and wait a while until you see the last three following lines:
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] \code{INFO  05:06:59  SparkClusterInfo plugin using 1 async writers}
\item[] \code{INFO  05:06:59  Initializing data object io tracker plugin}
\item[] \code{INFO  05:06:59  Hive metastore version: 1}
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] Now you are ready to use Spark and Cassandra!
\end{DUlineblock}


\section{Front End}
\label{frontEnd:front-end}\label{frontEnd::doc}
Our front end consists of an application demonstrating CEAN (Cassandra, Express, Angular, and Node) Integration with FusionCharts. Application allows users to view analysis pertaining to Democratic and Republican party candidate nominations. Data sources used were Twitter, GDELT, and the Huffington Post API. Each source was tracked by counts and all candidates were compared on a single FusionChart. Then, with all counts discovered on a certain time frame, analysis was done to try and find a correlation between multiple sources.

Type in either below when the Front End server has been started:

\begin{DUlineblock}{0em}
\item[] \textbf{Machine 1:} 128.138.202.110:3000
\item[] \textbf{Machine 2:} 128.138.202.117:3000
\end{DUlineblock}

(if neither connect to the Front End, the server is down or has not been initialized for Front End purposes)

\textbf{Instructions to run locally}
\begin{enumerate}
\item {} 
Clone repository and download npm packages
\begin{quote}

\code{git clone https://github.com/phugiadang/CSCI-4308-Open-Sources-Data-Analytics.git}

\code{npm install}

\code{bower install}
\end{quote}

\item {} 
Go into directory FrontEnd/NGC-FrontEnd/

\end{enumerate}

Run \code{npm start} or \code{sudo npm start}
\begin{enumerate}
\setcounter{enumi}{2}
\item {} 
Open browser \href{http://localhost:3000/}{http://localhost:3000/}

\end{enumerate}

\textbf{Questions}

For questions, contact Team OSAM (through GitHub is fine for now)


\chapter{Scripts}
\label{scripts::doc}\label{scripts:scripts}

\section{Data Collection Scripts}
\label{dataCollectionScripts:data-collection-scripts}\label{dataCollectionScripts::doc}

\subsection{getGDELT.sh}
\label{getGDELT::doc}\label{getGDELT:getgdelt-sh}

\subsubsection{\textbf{Purpose:} Download the GDELT files from the previous day for each candidate}
\label{getGDELT:purpose-download-the-gdelt-files-from-the-previous-day-for-each-candidate}

\paragraph{\textbf{Inputs:} The correctly formatted version of the previous day's date}
\label{getGDELT:inputs-the-correctly-formatted-version-of-the-previous-day-s-date}

\paragraph{\textbf{Outputs:} A big GDELT.zip file, along with the GDELT file for each candidate}
\label{getGDELT:outputs-a-big-gdelt-zip-file-along-with-the-gdelt-file-for-each-candidate}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/bash}

\PYG{n+nb}{cd} /home/centos/CSCI\PYGZhy{}4308\PYGZhy{}Open\PYGZhy{}Sources\PYGZhy{}Data\PYGZhy{}Analytics
\PYG{n+nv}{a}\PYG{o}{=}\PYG{k}{\PYGZdl{}(}python getDate.py\PYG{k}{)}
a+\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}000000\PYGZdq{}}
\PYG{n+nb}{echo} \PYG{n+nv}{\PYGZdl{}a}
\PYG{n+nv}{a}\PYG{o}{=}\PYG{k}{\PYGZdl{}(}python calculateDate.py \PYGZhy{}subDay \PYG{n+nv}{\PYGZdl{}a}\PYG{k}{)}
\PYG{c+c1}{\PYGZsh{}a=\PYGZdq{}20160309000000\PYGZdq{}}
\PYG{n+nv}{b}\PYG{o}{=}\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{a}\PYG{p}{:}\PYG{k}{:\PYGZhy{}}\PYG{n+nv}{6}\PYG{l+s+si}{\PYGZcb{}}

\PYG{n+nb}{echo} \PYG{n+nv}{\PYGZdl{}b}


python gdelt.py \PYGZhy{}n \PYG{l+s+s2}{\PYGZdq{}kasich, rubio, sanders, clinton, bush, carson, cruz, trump\PYGZdq{}} \PYGZhy{}e \PYG{n+nv}{\PYGZdl{}b}

python parseGDELT.py \PYG{n+nv}{\PYGZdl{}b}
\end{Verbatim}


\section{Testing Scripts}
\label{testingScripts:testing-scripts}\label{testingScripts::doc}

\chapter{Source Code}
\label{code:source-code}\label{code::doc}

\section{Data Collection}
\label{dataCollectionCode:data-collection}\label{dataCollectionCode::doc}

\subsection{GDELT}
\label{gdeltCode:gdelt}\label{gdeltCode::doc}

\subsubsection{getDate.py}
\label{getDate::doc}\label{getDate:getdate-py}

\paragraph{\textbf{Purpose:} Convert a Linux date to a more usable date format. Ex: Converts \emph{Mon Apr 11} to \emph{20160411}}
\label{getDate:purpose-convert-a-linux-date-to-a-more-usable-date-format-ex-converts-mon-apr-11-to-20160411}

\subparagraph{\textbf{Inputs:} Linux date provided by the date command}
\label{getDate:inputs-linux-date-provided-by-the-date-command}

\subparagraph{\textbf{Outputs:} Date format that GDELT understands}
\label{getDate:outputs-date-format-that-gdelt-understands}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{sys}
\PYG{k+kn}{from} \PYG{n+nn}{subprocess} \PYG{k+kn}{import} \PYG{n}{call}

\PYG{n}{a} \PYG{o}{=} \PYG{n}{call}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sudo sh \PYGZhy{}c }\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{date \textbar{} cut \PYGZhy{}d }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{ \PYGZhy{}f 2\PYGZhy{}6 \PYGZgt{} date.txt}\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{shell}\PYG{o}{=}\PYG{n+nb+bp}{True}\PYG{p}{)}


\PYG{n}{date\PYGZus{}dictionary} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Jan}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{01}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Feb}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{02}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Mar}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{03}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Apr}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{04}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{May}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{05}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Jun}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{06}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Jul}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{07}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Aug}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{08}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Sep}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{09}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Oct}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{10}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Nov}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{11}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Dec}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{12}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{}Feb 14 15:09:30}

\PYG{n}{full\PYGZus{}date} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}

\PYG{k}{def} \PYG{n+nf}{updateData}\PYG{p}{(}\PYG{n}{current\PYGZus{}word}\PYG{p}{,} \PYG{n}{current\PYGZus{}word\PYGZus{}number}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{global} \PYG{n}{full\PYGZus{}date}
    \PYG{n}{full\PYGZus{}date} \PYG{o}{+}\PYG{o}{=} \PYG{n}{current\PYGZus{}word}
    \PYG{k}{return} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{current\PYGZus{}word\PYGZus{}number}\PYG{o}{+}\PYG{l+m+mi}{1}



\PYG{k}{def} \PYG{n+nf}{getDate}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{global} \PYG{n}{full\PYGZus{}date}\PYG{p}{,} \PYG{n}{date\PYGZus{}dictionary}
    \PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{date.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{date\PYGZus{}file}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{line} \PYG{o+ow}{in} \PYG{n}{date\PYGZus{}file}\PYG{p}{:}
            \PYG{n}{current\PYGZus{}word} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}
            \PYG{n}{current\PYGZus{}word\PYGZus{}number} \PYG{o}{=} \PYG{l+m+mi}{0}
            \PYG{k}{for} \PYG{n}{character} \PYG{o+ow}{in} \PYG{n}{line}\PYG{p}{:}
                \PYG{k}{if} \PYG{p}{(}\PYG{n}{character} \PYG{o}{!=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{:}
                    \PYG{n}{current\PYGZus{}word} \PYG{o}{+}\PYG{o}{=} \PYG{n}{character}
                    
                \PYG{k}{else}\PYG{p}{:}
                    \PYG{k}{if} \PYG{p}{(}\PYG{n}{current\PYGZus{}word\PYGZus{}number} \PYG{o}{==} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{:}
                        \PYG{n}{current\PYGZus{}word} \PYG{o}{=} \PYG{n}{date\PYGZus{}dictionary}\PYG{p}{[}\PYG{n}{current\PYGZus{}word}\PYG{p}{]}

	            \PYG{n}{res} \PYG{o}{=} \PYG{n}{updateData}\PYG{p}{(}\PYG{n}{current\PYGZus{}word}\PYG{p}{,} \PYG{n}{current\PYGZus{}word\PYGZus{}number}\PYG{p}{)}
                    \PYG{n}{current\PYGZus{}word} \PYG{o}{=} \PYG{n}{res}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
                    \PYG{n}{current\PYGZus{}word\PYGZus{}number} \PYG{o}{=} \PYG{n}{res}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}

        \PYG{n}{full\PYGZus{}date} \PYG{o}{=} \PYG{n}{current\PYGZus{}word}\PYG{o}{+}\PYG{n}{full\PYGZus{}date}


        
    
    \PYG{n}{full\PYGZus{}date} \PYG{o}{=} \PYG{n}{full\PYGZus{}date}\PYG{o}{.}\PYG{n}{replace}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MDT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{replace}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{full\PYGZus{}date} \PYG{o}{=} \PYG{n}{full\PYGZus{}date}\PYG{p}{[}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8}\PYG{p}{]} 
    

    \PYG{c+c1}{\PYGZsh{}day is less than 10, add zero in front}
    \PYG{k}{if} \PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{full\PYGZus{}date}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{full\PYGZus{}date} \PYG{o}{=} \PYG{n}{full\PYGZus{}date}\PYG{p}{[}\PYG{p}{:}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{+} \PYG{n}{full\PYGZus{}date}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{:}\PYG{p}{]}
  
    \PYG{k}{return} \PYG{n}{full\PYGZus{}date}

\PYG{k}{print} \PYG{n}{getDate}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}


\subsection{Twitter}
\label{twitterCode:twitter}\label{twitterCode::doc}

\subsubsection{threadCass.py}
\label{threadCass::doc}\label{threadCass:threadcass-py}

\paragraph{\textbf{Purpose:} Stream in tweets about presedential candidates, and store the tweets in the appropriate table in Cassandra.}
\label{threadCass:purpose-stream-in-tweets-about-presedential-candidates-and-store-the-tweets-in-the-appropriate-table-in-cassandra}

\subparagraph{\textbf{Inputs:} Tweets about presedential candidates via the Tweepy API}
\label{threadCass:inputs-tweets-about-presedential-candidates-via-the-tweepy-api}

\subparagraph{\textbf{Outputs:} Tweet fields compacted into rows that are put into Cassandra}
\label{threadCass:outputs-tweet-fields-compacted-into-rows-that-are-put-into-cassandra}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{}http://stackoverflow.com/questions/16602483/filtering\PYGZhy{}of\PYGZhy{}tweets\PYGZhy{}received\PYGZhy{}from\PYGZhy{}statuses\PYGZhy{}filter\PYGZhy{}streaming\PYGZhy{}api}
\PYG{c+c1}{\PYGZsh{}need to edit so that we have sets of tracked strings for names}
\PYG{c+c1}{\PYGZsh{}}
\PYG{k+kn}{from} \PYG{n+nn}{threading} \PYG{k+kn}{import} \PYG{n}{Thread}
\PYG{k+kn}{from} \PYG{n+nn}{cassandra.cluster} \PYG{k+kn}{import} \PYG{n}{Cluster}
\PYG{k+kn}{from} \PYG{n+nn}{subprocess} \PYG{k+kn}{import} \PYG{n}{call}
\PYG{k+kn}{import} \PYG{n+nn}{tweepy}
\PYG{k+kn}{import} \PYG{n+nn}{json}
\PYG{k+kn}{import} \PYG{n+nn}{os}

\PYG{n}{keyspace} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{candidates}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{cluster} \PYG{o}{=} \PYG{n}{Cluster}\PYG{p}{(}
	\PYG{n}{contact\PYGZus{}points}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{128.138.202.110}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{128.138.202.117}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}connect to our Cassandra Keyspace}
\PYG{n}{session} \PYG{o}{=} \PYG{n}{cluster}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{keyspace}\PYG{p}{)}


\PYG{n}{consumer\PYGZus{}key} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SNzrQmsgZl3Y1obF5U0VzfJR3}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{consumer\PYGZus{}secret} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{JTGc0f7lznwXLjWEwQPe6XKY1lLrS4kbinCvloZdkTi5Zs7GM8}\PYG{l+s+s2}{\PYGZdq{}}

\PYG{n}{access\PYGZus{}token} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{3298946066\PYGZhy{}MnUVaCoTJQgxKuKL2NCqtb5cWImgxTrZAVKRCxp}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{access\PYGZus{}token\PYGZus{}secret} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LR0igd7X609r3N0fdR5tWZCTF0TLOQqcArpWNAmL45ozN}\PYG{l+s+s2}{\PYGZdq{}}



\PYG{n}{file11}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{totalTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines1} \PYG{o}{=} \PYG{n}{file11}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines1} \PYG{o}{=} \PYG{n}{lines1}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{n}{file12}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{trumpTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines2} \PYG{o}{=} \PYG{n}{file12}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines2} \PYG{o}{=} \PYG{n}{lines2}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{n}{file13}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rubioTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines3} \PYG{o}{=} \PYG{n}{file13}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines3} \PYG{o}{=} \PYG{n}{lines3}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{n}{file14}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{carsonTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines4} \PYG{o}{=} \PYG{n}{file14}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines4} \PYG{o}{=} \PYG{n}{lines4}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{n}{file15}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sandersTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines5} \PYG{o}{=} \PYG{n}{file15}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines5} \PYG{o}{=} \PYG{n}{lines5}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}


\PYG{n}{file16}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{clintonTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines6} \PYG{o}{=} \PYG{n}{file16}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines6} \PYG{o}{=} \PYG{n}{lines6}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{n}{file17}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cruzTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines7} \PYG{o}{=} \PYG{n}{file17}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines7} \PYG{o}{=} \PYG{n}{lines7}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{n}{file18}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{kasichTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines8} \PYG{o}{=} \PYG{n}{file18}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines8} \PYG{o}{=} \PYG{n}{lines8}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{n}{file19}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{bushTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{lines9} \PYG{o}{=} \PYG{n}{file19}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{lines9} \PYG{o}{=} \PYG{n}{lines9}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}call(\PYGZdq{}sudo sh \PYGZhy{}c \PYGZbs{}\PYGZdq{}date \textbar{} cut \PYGZhy{}d \PYGZsq{} \PYGZsq{} \PYGZhy{}f 1\PYGZhy{}5 \PYGZgt{} startTime.txt\PYGZbs{}\PYGZdq{}\PYGZdq{}, shell=True)}


\PYG{n}{tweet\PYGZus{}count} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{total}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines1}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{trump}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines2}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file12}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{trumpTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rubio}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines3}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file13}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rubioTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{carson}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines4}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file14}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{carsonTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sanders}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines5}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file15}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sandersTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{clinton}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines6}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file16}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{clintonTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cruz}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines7}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file17}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cruzTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{kasich}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines8}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file18}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{kasichTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{bush}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lines9}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:} \PYG{p}{[}\PYG{n}{file19}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{bushTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}

\PYG{n}{total\PYGZus{}tweet\PYGZus{}count} \PYG{o}{=} \PYG{n}{tweet\PYGZus{}count}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{total}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}


\PYG{n}{month\PYGZus{}dict} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Jan}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{01}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Feb}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{02}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Mar}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{03}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Apr}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{04}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{May}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{05}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Jun}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{06}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Jul}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{07}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Aug}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{08}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Sep}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{09}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Oct}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{10}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Nov}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{11}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Dec}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{12}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{\PYGZcb{}}


\PYG{c+c1}{\PYGZsh{}This function converts a standard date to a date used by our database}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}Ex.}
\PYG{c+c1}{\PYGZsh{}Input = \PYGZdq{}Feb 16 05:11:06 2016\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}Output = 20160216051106}
\PYG{c+c1}{\PYGZsh{}}

\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}numerizeDate(real\PYGZus{}date)}
\PYG{l+s+sd}{:param: the REAL date}
\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{def} \PYG{n+nf}{numerizeDate}\PYG{p}{(}\PYG{n}{real\PYGZus{}date}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{if} \PYG{p}{(}\PYG{n}{real\PYGZus{}date} \PYG{o}{==} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{real\PYGZus{}date}
    \PYG{n}{numerical\PYGZus{}date} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{current\PYGZus{}word} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{word\PYGZus{}num} \PYG{o}{=} \PYG{l+m+mi}{1}
    \PYG{n}{character\PYGZus{}count} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{k}{for} \PYG{n}{character} \PYG{o+ow}{in} \PYG{n}{real\PYGZus{}date}\PYG{p}{:}
	\PYG{n}{character\PYGZus{}count} \PYG{o}{+}\PYG{o}{=} \PYG{l+m+mi}{1}
	\PYG{k}{if} \PYG{p}{(}\PYG{n}{character\PYGZus{}count} \PYG{o}{==} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{real\PYGZus{}date}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
	    \PYG{n}{current\PYGZus{}word} \PYG{o}{+}\PYG{o}{=} \PYG{n}{character}
	    \PYG{n}{numerical\PYGZus{}date} \PYG{o}{=} \PYG{n}{current\PYGZus{}word}\PYG{o}{+}\PYG{n}{numerical\PYGZus{}date}
            \PYG{k}{return} \PYG{n}{numerical\PYGZus{}date}\PYG{o}{.}\PYG{n}{replace}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
        \PYG{k}{elif} \PYG{p}{(}\PYG{n}{character} \PYG{o}{!=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{current\PYGZus{}word} \PYG{o}{+}\PYG{o}{=} \PYG{n}{character}
	\PYG{k}{else}\PYG{p}{:}
	    \PYG{k}{if} \PYG{p}{(}\PYG{n}{word\PYGZus{}num} \PYG{o}{==} \PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{:}
		\PYG{n}{numerical\PYGZus{}date} \PYG{o}{=} \PYG{n}{month\PYGZus{}dict}\PYG{p}{[}\PYG{n}{current\PYGZus{}word}\PYG{p}{]}\PYG{o}{+}\PYG{n}{numerical\PYGZus{}date}
	    \PYG{k}{elif} \PYG{p}{(}\PYG{p}{(}\PYG{n}{word\PYGZus{}num} \PYG{o}{==} \PYG{l+m+mi}{3}\PYG{p}{)} \PYG{o+ow}{or} \PYG{p}{(}\PYG{n}{word\PYGZus{}num} \PYG{o}{==} \PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
		\PYG{n}{numerical\PYGZus{}date} \PYG{o}{+}\PYG{o}{=} \PYG{n}{current\PYGZus{}word}
 
            \PYG{n}{current\PYGZus{}word} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}
            \PYG{n}{word\PYGZus{}num} \PYG{o}{+}\PYG{o}{=} \PYG{l+m+mi}{1}
	    		

\PYG{k}{class} \PYG{n+nc}{StreamListener}\PYG{p}{(}\PYG{n}{tweepy}\PYG{o}{.}\PYG{n}{StreamListener}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{keyword}\PYG{p}{,} \PYG{n}{api}\PYG{o}{=}\PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb}{super}\PYG{p}{(}\PYG{n}{StreamListener}\PYG{p}{,} \PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{o}{.}\PYG{n}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n}{api}\PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{keyword} \PYG{o}{=} \PYG{n}{keyword}

    \PYG{k}{def} \PYG{n+nf}{on\PYGZus{}status}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{tweet}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{print} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Ran on\PYGZus{}status}\PYG{l+s+s1}{\PYGZsq{}}

    \PYG{k}{def} \PYG{n+nf}{on\PYGZus{}error}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{status\PYGZus{}code}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{print} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Error: }\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{+} \PYG{n+nb}{repr}\PYG{p}{(}\PYG{n}{status\PYGZus{}code}\PYG{p}{)}
        \PYG{n}{os}\PYG{o}{.}\PYG{n}{\PYGZus{}exit}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)}
        \PYG{k}{return} \PYG{n+nb+bp}{False}

    \PYG{k}{def} \PYG{n+nf}{on\PYGZus{}data}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}\PYG{p}{:}
        
        \PYG{k}{global} \PYG{n}{tweet\PYGZus{}count}\PYG{p}{,} \PYG{n}{total\PYGZus{}tweet\PYGZus{}count}
        \PYG{n}{total\PYGZus{}tweet\PYGZus{}count} \PYG{o}{+}\PYG{o}{=} \PYG{l+m+mi}{1} 
           
        \PYG{c+c1}{\PYGZsh{}convert the tweet to json}
        \PYG{n}{d} \PYG{o}{=} \PYG{n}{json}\PYG{o}{.}\PYG{n}{loads}\PYG{p}{(}\PYG{n}{data}\PYG{p}{)}
        \PYG{n}{hash\PYGZus{}tags} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
        \PYG{k}{try}\PYG{p}{:}
            \PYG{c+c1}{\PYGZsh{}If tweet has an entities field, append all hashtags to the list}
            \PYG{k}{for} \PYG{n}{element} \PYG{o+ow}{in} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{entities}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{hashtags}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{:}
                 \PYG{c+c1}{\PYGZsh{}uncomment next line to print all hashtags}
                 \PYG{c+c1}{\PYGZsh{}print element[\PYGZdq{}text\PYGZdq{}]}
                 \PYG{n}{hash\PYGZus{}tags}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{element}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}
        \PYG{k}{except}\PYG{p}{:}
	    \PYG{k}{print} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Tweet for }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{ does not contain an entities field!}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{keyword}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)}
      
        \PYG{n}{coord} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
        \PYG{k}{try}\PYG{p}{:}
            \PYG{k}{if} \PYG{p}{(}\PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{!=} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{coord} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
        \PYG{k}{except}\PYG{p}{:}
    	    \PYG{k}{print} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Tweet for }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{ does not contain a coordinates field!}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{keyword}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)}


        \PYG{n}{c9}\PYG{p}{,}\PYG{n}{text\PYGZus{}field} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{NULL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{NULL}\PYG{l+s+s1}{\PYGZsq{}}
        \PYG{n}{b9}\PYG{p}{,}\PYG{n}{d9}\PYG{p}{,}\PYG{n}{e9}\PYG{p}{,}\PYG{n}{g9} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}
	\PYG{n}{a9}\PYG{p}{,} \PYG{n}{f9}\PYG{p}{,} \PYG{n}{utc} \PYG{o}{=} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}
        \PYG{n}{h9} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}1}\PYG{l+s+s2}{\PYGZdq{}}
   
        \PYG{n}{bad} \PYG{o}{=} \PYG{l+m+mi}{1}

        \PYG{k}{try}\PYG{p}{:}
            \PYG{c+c1}{\PYGZsh{}Make sure tweet has all needed fields}
            \PYG{n}{utc} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{user}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{utc\PYGZus{}offset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            \PYG{n}{a9} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{created\PYGZus{}at}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            \PYG{n}{b9} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{favorite\PYGZus{}count}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}        
            \PYG{n}{c9} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lang}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            \PYG{n}{d9} \PYG{o}{=} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{is\PYGZus{}quote\PYGZus{}status}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}
            \PYG{n}{e9} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{retweet\PYGZus{}count}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            \PYG{n}{f9} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{id\PYGZus{}str}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            \PYG{n}{g9} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{retweeted\PYGZus{}status}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            \PYG{n}{h9} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{user}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{id\PYGZus{}str}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            \PYG{n}{text\PYGZus{}field} \PYG{o}{=} \PYG{n}{d}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
            
                     
        \PYG{k}{except}\PYG{p}{:}
            \PYG{n}{bad} \PYG{o}{=} \PYG{l+m+mi}{1}
        
        \PYG{k}{if} \PYG{p}{(}\PYG{n}{g9} \PYG{o}{!=} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{g9} \PYG{o}{=} \PYG{l+m+mi}{1}    

        \PYG{c+c1}{\PYGZsh{}Convert date into usable format}
        \PYG{n}{numerical\PYGZus{}date} \PYG{o}{=} \PYG{n}{numerizeDate}\PYG{p}{(}\PYG{n}{a9}\PYG{p}{)}
        \PYG{n}{h9} \PYG{o}{=} \PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{h9}\PYG{p}{)}
      
        \PYG{k}{if} \PYG{p}{(}\PYG{n}{utc} \PYG{o}{!=} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{:}
            \PYG{c+c1}{\PYGZsh{}Convert tweet time to user local time}
            \PYG{n}{utc} \PYG{o}{=} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{utc}\PYG{p}{)}\PYG{o}{/}\PYG{l+m+mi}{3600}
            \PYG{n}{actual\PYGZus{}date} \PYG{o}{=} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{numerical\PYGZus{}date}\PYG{p}{)} \PYG{o}{+} \PYG{n}{utc}
        
	
	\PYG{c+c1}{\PYGZsh{}if (numerical\PYGZus{}date != \PYGZsq{}NULL\PYGZsq{}):}
	\PYG{c+c1}{\PYGZsh{}    f9 = int(numerical\PYGZus{}date + str(f9))}

        \PYG{c+c1}{\PYGZsh{}Execute the Cassandra command to store the tweet fields into the database	    }
        \PYG{n}{final\PYGZus{}step} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{execute\PYGZus{}async}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{insert into }\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{+} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{keyword}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{(tweet\PYGZus{}id, coordinates, created\PYGZus{}at, favorite\PYGZus{}count, hashtags, lang, quoted\PYGZus{}status\PYGZus{}id, retweet\PYGZus{}count, tweet\PYGZus{}text, is\PYGZus{}retweet, user\PYGZus{}id) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{(}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{f9}\PYG{p}{)}\PYG{p}{,}\PYG{n}{coord}\PYG{p}{,}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{numerical\PYGZus{}date}\PYG{p}{)}\PYG{p}{,}\PYG{n}{b9}\PYG{p}{,}\PYG{n}{hash\PYGZus{}tags}\PYG{p}{,}\PYG{n}{c9}\PYG{p}{,}\PYG{n}{d9}\PYG{p}{,}\PYG{n}{e9}\PYG{p}{,}\PYG{n}{text\PYGZus{}field}\PYG{p}{,}\PYG{n}{g9}\PYG{p}{,}\PYG{n}{h9}\PYG{p}{)}\PYG{p}{)}



        \PYG{c+c1}{\PYGZsh{}Uncomment this try/except block if you want to see if the tweet fields are getting stored properly}
	
        \PYG{c+c1}{\PYGZsh{}try:}
            \PYG{c+c1}{\PYGZsh{}if this prints a cassandra.cluster.ResultSet object, it was successfully stored in the database}
        \PYG{c+c1}{\PYGZsh{}    print final\PYGZus{}step.result()}
        \PYG{c+c1}{\PYGZsh{}except:}
	    
 	    \PYG{c+c1}{\PYGZsh{}print \PYGZsq{}fail\PYGZbs{}n\PYGZsq{}}


        \PYG{n}{file1}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{totalTweetCount.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{w}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
         
        \PYG{n}{file1}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{total\PYGZus{}tweet\PYGZus{}count}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{file1}\PYG{o}{.}\PYG{n}{close}        

        \PYG{c+c1}{\PYGZsh{}Read and update the candidate\PYGZsq{}s tweet count and write to file}
        \PYG{n}{bad\PYGZus{}list} \PYG{o}{=} \PYG{n}{tweet\PYGZus{}count}\PYG{p}{[}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{keyword}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]}\PYG{o}{.}\PYG{n}{itervalues}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{next}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{filth} \PYG{o}{=} \PYG{n}{bad\PYGZus{}list}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
        \PYG{n}{filth}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{fil}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{bad\PYGZus{}list}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
        \PYG{n}{lin} \PYG{o}{=} \PYG{n}{fil}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{splitlines}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cur\PYGZus{}count1} \PYG{o}{=} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{lin}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}
        \PYG{n}{fil}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cur\PYGZus{}count1}\PYG{o}{+}\PYG{o}{=}\PYG{l+m+mi}{1}
        \PYG{n}{fil}\PYG{o}{=}\PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{bad\PYGZus{}list}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{w}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
        \PYG{n}{fil}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{cur\PYGZus{}count1}\PYG{p}{)}\PYG{p}{)}
        \PYG{c+c1}{\PYGZsh{}print \PYGZsq{}\PYGZpc{}s has \PYGZpc{}d tweets\PYGZbs{}n\PYGZsq{} \PYGZpc{} (self.keyword[1], cur\PYGZus{}count1)}
	 
        \PYG{n}{fil}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        
        


\PYG{k}{def} \PYG{n+nf}{start\PYGZus{}stream}\PYG{p}{(}\PYG{n}{auth}\PYG{p}{,} \PYG{n}{track}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{tweepy}\PYG{o}{.}\PYG{n}{Stream}\PYG{p}{(}\PYG{n}{auth}\PYG{o}{=}\PYG{n}{auth}\PYG{p}{,} \PYG{n}{listener}\PYG{o}{=}\PYG{n}{StreamListener}\PYG{p}{(}\PYG{n}{track}\PYG{p}{)}\PYG{p}{)}\PYG{o}{.}\PYG{n}{filter}\PYG{p}{(}\PYG{n}{track}\PYG{o}{=}\PYG{p}{[}\PYG{n}{track}\PYG{p}{]}\PYG{p}{)}
    
\PYG{k}{def} \PYG{n+nf}{start\PYGZus{}streamList}\PYG{p}{(}\PYG{n}{auth}\PYG{p}{,} \PYG{n}{list\PYGZus{}track}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{tweepy}\PYG{o}{.}\PYG{n}{Stream}\PYG{p}{(}\PYG{n}{auth}\PYG{o}{=}\PYG{n}{auth}\PYG{p}{,} \PYG{n}{listener}\PYG{o}{=}\PYG{n}{StreamListener}\PYG{p}{(}\PYG{n}{list\PYGZus{}track}\PYG{p}{)}\PYG{p}{)}\PYG{o}{.}\PYG{n}{filter}\PYG{p}{(}\PYG{n}{track}\PYG{o}{=}\PYG{p}{[}\PYG{n}{list\PYGZus{}track}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}\PYG{n}{list\PYGZus{}track}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,}\PYG{n}{list\PYGZus{}track}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,}\PYG{n}{list\PYGZus{}track}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{]}\PYG{p}{)}
    
\PYG{c+c1}{\PYGZsh{}auth = tweepy.OAuthHandler(consumer\PYGZus{}key, consumer\PYGZus{}secret)}
\PYG{c+c1}{\PYGZsh{}auth.set\PYGZus{}access\PYGZus{}token(access\PYGZus{}token, access\PYGZus{}token\PYGZus{}secret)}


\PYG{n}{list\PYGZus{}trump} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Trump}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{trump}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Donald Trump}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{the Donald}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}rubio} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Rubio}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{rubio}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Marco Rubio}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Marco Antonio Rubio}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}sanders}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Sanders}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{sanders}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Bernie Sanders}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{feel the bern}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}carson} \PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Carson}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{carson}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Ben Carson}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Dr. Ben Carson}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}cruz} \PYG{o}{=}  \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Cruz}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{cruz}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CruzCrew}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{TrusTED}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}clinton} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Clinton}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{clinton}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Hillary}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Hillary Clinton}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}kasich} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Kasich}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{kasich}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{John Kasich}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Kasich4Us}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}bush} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Jeb!}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bush}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Jeb Bush}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Bush}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{list\PYGZus{}of\PYGZus{}lists} \PYG{o}{=} \PYG{p}{[}\PYG{n}{list\PYGZus{}trump}\PYG{p}{,}\PYG{n}{list\PYGZus{}rubio}\PYG{p}{,}\PYG{n}{list\PYGZus{}sanders}\PYG{p}{,}\PYG{n}{list\PYGZus{}carson}\PYG{p}{,}\PYG{n}{list\PYGZus{}cruz}\PYG{p}{,}\PYG{n}{list\PYGZus{}clinton}\PYG{p}{,}\PYG{n}{list\PYGZus{}kasich}\PYG{p}{,}\PYG{n}{list\PYGZus{}bush}\PYG{p}{]}

\PYG{n}{track} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{clinton}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bush}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{python}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{i}\PYG{o}{=}\PYG{l+m+mi}{0}

\PYG{n}{consumer} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
\PYG{n}{consumer\PYGZus{}secret} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
\PYG{n}{access\PYGZus{}token} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
\PYG{n}{access\PYGZus{}token\PYGZus{}secret} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}

\PYG{n}{line\PYGZus{}count} \PYG{o}{=} \PYG{l+m+mi}{0}

\PYG{n}{key\PYGZus{}list} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}

\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/home/centos/CSCI\PYGZhy{}4308\PYGZhy{}Open\PYGZhy{}Sources\PYGZhy{}Data\PYGZhy{}Analytics/keys.txt}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{key\PYGZus{}text}\PYG{p}{:}
	\PYG{k}{for} \PYG{n}{each\PYGZus{}key} \PYG{o+ow}{in} \PYG{n}{key\PYGZus{}text}\PYG{p}{:}
 		\PYG{n}{key\PYGZus{}list}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{each\PYGZus{}key}\PYG{p}{)}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{c} \PYG{o}{=} \PYG{l+m+mi}{0}

\PYG{c+c1}{\PYGZsh{}Append each key to its appropriate list for each of the 8 candidates}
\PYG{k}{for} \PYG{n}{x} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{8}\PYG{p}{)}\PYG{p}{:}

    \PYG{n}{consumer}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{key\PYGZus{}list}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{o}{+}\PYG{n}{c}\PYG{p}{]}\PYG{p}{)}

    \PYG{n}{consumer\PYGZus{}secret}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{key\PYGZus{}list}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{o}{+}\PYG{n}{c}\PYG{p}{]}\PYG{p}{)}

    \PYG{n}{access\PYGZus{}token}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{key\PYGZus{}list}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{o}{+}\PYG{n}{c}\PYG{p}{]}\PYG{p}{)}

    \PYG{n}{access\PYGZus{}token\PYGZus{}secret}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{key\PYGZus{}list}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{o}{+}\PYG{n}{c}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{c} \PYG{o}{=} \PYG{n}{c}\PYG{o}{+}\PYG{l+m+mi}{4}


\PYG{c+c1}{\PYGZsh{}Spawn a new thread for each of the 8 candidates }
\PYG{k}{for} \PYG{n}{item} \PYG{o+ow}{in} \PYG{n}{list\PYGZus{}of\PYGZus{}lists}\PYG{p}{:}

    \PYG{n}{auth} \PYG{o}{=} \PYG{n}{tweepy}\PYG{o}{.}\PYG{n}{OAuthHandler}\PYG{p}{(}\PYG{n}{consumer}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{,} \PYG{n}{consumer\PYGZus{}secret}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{auth}\PYG{o}{.}\PYG{n}{set\PYGZus{}access\PYGZus{}token}\PYG{p}{(}\PYG{n}{access\PYGZus{}token}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{,} \PYG{n}{access\PYGZus{}token\PYGZus{}secret}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{thread} \PYG{o}{=} \PYG{n}{Thread}\PYG{p}{(}\PYG{n}{target}\PYG{o}{=}\PYG{n}{start\PYGZus{}streamList}\PYG{p}{,} \PYG{n}{args}\PYG{o}{=}\PYG{p}{(}\PYG{n}{auth}\PYG{p}{,} \PYG{n}{item}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{thread}\PYG{o}{.}\PYG{n}{start}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{i} \PYG{o}{=} \PYG{n}{i} \PYG{o}{+} \PYG{l+m+mi}{1}
\end{Verbatim}


\subsection{Huff Post Polls}
\label{huffPostPollDataCode:huff-post-polls}\label{huffPostPollDataCode::doc}

\section{Analysis}
\label{analysisCode::doc}\label{analysisCode:analysis}

\subsection{Time Series Analysis}
\label{timeSeriesAnalysisCode::doc}\label{timeSeriesAnalysisCode:time-series-analysis}

\subsection{Sentiment Analysis}
\label{sentimentAnalysisCode:sentiment-analysis}\label{sentimentAnalysisCode::doc}

\subsection{Linear Regression}
\label{linearRegressionCode:linear-regression}\label{linearRegressionCode::doc}

\subsection{Higher Order Regression}
\label{higherOrderRegressionCode::doc}\label{higherOrderRegressionCode:higher-order-regression}


\renewcommand{\indexname}{Index}
\printindex
\end{document}
